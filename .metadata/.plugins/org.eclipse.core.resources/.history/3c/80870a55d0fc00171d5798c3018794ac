package ec.zahura.action;

import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.opensymphony.xwork2.ActionSupport;

public class BuyItemAction extends ActionSupport implements SessionAware {



	/**
	 * アイテム情報を格納
	 */
	public Map<String,Object> session;

	private String itemTransactionId;
	private String itemName;
	private String itemImage;
	private String itemPrice;
	/**
	 * アイテム購入個数
	 */
	private int count;
	private String checkList;
	/**
	 * 支払い方法
	 */
	private String pay;
	private String userMasterId;

	private String errorMessage;


	/**
	 * 商品情報取得メソッド
	 */
	public String execute() {

		System.out.println(itemTransactionId);
		System.out.println(itemName);
		System.out.println(itemImage);
		System.out.println(itemPrice);
		System.out.println(count);
		System.out.println(checkList);
		System.out.println(pay);
		System.out.println(userMasterId);

		if(checkList==null || checkList.isEmpty() ){
			errorMessage="商品が何も選択されていません。";
		}

		String result = SUCCESS;
		session.put("count", count);
		int intCount = Integer.parseInt(session.get("count").toString());
		int intPrice = Integer.parseInt(session.get("buyItem_price").toString());

		session.put("total_price", intCount * intPrice);
		String payment;

		if(pay.equals("1")) {
			payment = "現金払い";
			session.put("pay", payment);
		}else {
			payment = "クレジットカード";
			session.put("pay", payment);
		}
		return result;
	}



	public Map<String, Object> getSession() {
		return session;
	}



	public void setSession(Map<String, Object> session) {
		this.session = session;
	}



	public String getItemTransactionId() {
		return itemTransactionId;
	}



	public void setItemTransactionId(String itemTransactionId) {
		this.itemTransactionId = itemTransactionId;
	}



	public String getItemName() {
		return itemName;
	}



	public void setItemName(String itemName) {
		this.itemName = itemName;
	}



	public String getItemImage() {
		return itemImage;
	}



	public void setItemImage(String itemImage) {
		this.itemImage = itemImage;
	}



	public String getItemPrice() {
		return itemPrice;
	}



	public void setItemPrice(String itemPrice) {
		this.itemPrice = itemPrice;
	}



	public int getCount() {
		return count;
	}



	public void setCount(int count) {
		this.count = count;
	}



	public String getCheckList() {
		return checkList;
	}



	public void setCheckList(String checkList) {
		this.checkList = checkList;
	}



	public String getPay() {
		return pay;
	}



	public void setPay(String pay) {
		this.pay = pay;
	}



	public String getUserMasterId() {
		return userMasterId;
	}



	public void setUserMasterId(String userMasterId) {
		this.userMasterId = userMasterId;
	}


}
